window.Regiondo={config:{ajaxLoadingClass:"regiondo-ajax-loading",localStorageKey:"regiondo-bookings"},events:{bookingUpdated:"RegiondoBookingUpdated",cartUpdated:"RegiondoCartUpdated"},getStorage:function(){var e=JSON.parse(window.localStorage.getItem(this.config.localStorageKey))||[];if(e.length>0){var t=Math.floor(Date.now()/1e3);e=e.filter(function(e){return e.ttl>t})}return window.localStorage.setItem(this.config.localStorageKey,JSON.stringify(e)),e},dispatchEvent:function(e){if("function"==typeof window.Event)var t=new window.Event(e);else{var t=document.createEvent("Event");t.initEvent(e,!0,!0)}document.dispatchEvent(t)},createRequest:function(e){var t=new window.XMLHttpRequest,o=this.getStorage();return t.open(e.method,e.url,!0),t.setRequestHeader("X-Requested-With","XMLHttpRequest"),t.setRequestHeader("X-Regiondo-Bookings",JSON.stringify(o)),t.onloadstart=function(){e.container&&e.container.classList.add(this.config.ajaxLoadingClass)}.bind(this),t.onloadend=function(){e.container&&e.container.classList.remove(this.config.ajaxLoadingClass)}.bind(this),t.onload=function(){if(t.status>=200&&t.status<400){var o=JSON.parse(t.responseText);o.bookings&&window.localStorage.setItem(this.config.localStorageKey,JSON.stringify(o.bookings)),"function"==typeof e.success&&e.success(o)}else console.error(t)}.bind(this),t}};